# README


## Running in Argo

- Custom Workflow Parameters
  - container: cuahsi/parflow-subset-argo:v1
  - environment variables
    - PFINPUT: /srv/input/pfconus.v1.0
      - SHAPE: /srv/output/q1w2e3r4t5y6u7i8o9p0/watershed.shp
      - OUTPUT: /srv/output/q1w2e3r4t5y6u7i8o9p0
      - LABEL: test-subset
  - volumes
    - PFINPUT
      - endpoint: https://storage.googleapis.com
      - name: subsetter-static-input
      - mount dir: /srv/input
    - OUTPUT
      - endpoint: https://storage.googleapis.com
      - name: subsetter-outputs
      - mount dir: /srv/output
  
  - service account: domain-subsetter@thredds.iam.gserviceaccount.com  
  - access key: [SECRET]  
  - secret: [SECRET]  


## Data Storage

Input Data: `gs://subsetter-static-input`
    - These are the static model input datasets that are used as  
      inputs to the subsetting process.  

Output Data: `gs://subsetter-outputs`
    - These are the output subsets that are generated by the domain subsetter,  
      i.e. user output files.  

## Service Account

- domain-subsetter@thredds.iam.gserviceaccount.com  
  - View permission to Input Data bucket  
  - Create permission on Output Data bucket  
